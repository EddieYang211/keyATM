PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) -DHAVE_OPENMP
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS)

# Enable C++17 as required by the package
CXX_STD = CXX17

# Conservative optimization to avoid template parsing issues
PKG_CXXFLAGS += -O2 

# Specific fixes for GCC 12+ template parsing issues
PKG_CXXFLAGS += -std=c++17 -ftemplate-backtrace-limit=0

# Disable problematic optimizations
PKG_CXXFLAGS += -fno-strict-aliasing -fno-aggressive-loop-optimizations

# Eigen configuration for stability
PKG_CXXFLAGS += -DEIGEN_DONT_PARALLELIZE -DEIGEN_NO_DEBUG 